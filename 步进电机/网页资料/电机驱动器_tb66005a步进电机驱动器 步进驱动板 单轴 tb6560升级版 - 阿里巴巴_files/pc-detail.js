define(["jquery"],function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e=window.jQuery,r=t||e;function n(t){var e=Object.prototype.toString.call(t).toLowerCase(),n=/\[object\s(\w+)\]/gi.exec(e),o=void 0;return n&&n[1]&&0<n[1].length&&(o=n[1]),o}var u={getTypeName:n,isRegExp:function(t){return"regexp"===n(t)},isJSON:function(t){return"object"===n(t)},isString:function(t){return"string"===n(t)},isArray:function(t){return"array"===n(t)}},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=window.navigator.userAgent,s={};function o(t){if("object"===(void 0===t?"undefined":a(t))){var e=t.data||{},n="function"==typeof t.success?t.success:function(){},o="function"==typeof t.fail?t.fail:function(){},i="function"==typeof t.error?t.error:function(){};r.ajax({url:"https://dcms.1688.com/open/query.json",type:"get",dataType:"jsonp",data:{dataId:"236",app:"DCMS",resourceId:e.resourceId,_t:(new Date).getTime()},success:function(t){try{var e=function(t){var e=void 0;if(!0===t.success&&t.content&&t.content.data&&t.content.data[0]&&t.content.data[0].versionContent&&"string"==typeof t.content.data[0].versionContent)try{e=JSON.parse(t.content.data[0].versionContent)}catch(t){console.log(t)}return e}(t);n(e)}catch(t){console.log(t)}},fail:o,error:i})}}function c(t){if(void 0===t)return null;var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(e);return null!=n&&unescape(n[2])}function l(){var t=s["cookie"];if(u.isJSON(t))return t;for(var e,n,o=(document.cookie||"").split(";"),i={},r=0;r<o.length;r++){var a=o[r];if("string"==typeof a){var c=(a=a.replace("=","$_EQUAL_SIGN_$")).split("$_EQUAL_SIGN_$"),l=c[0];try{l=l.trim()}catch(t){console.log(t)}i[l]=c[1]}}return n=i,void 0===s[e="cookie"]&&(s[e]=n),i}var f=!1;c("_JDATA_DEBUG_")+""=="true"&&(f=!0);var g={isDebugEnv:f,getJDataParam:function(t){if(u.isJSON(t)){var e=u.isJSON(t.jdata)?t.jdata:{},n=u.isJSON(t.jdataDebug)?t.jdataDebug:{},o=e;return"true"===c("_JDATA_DEBUG_")&&(o=r.extend(o,n)),o}},getConfig:function(t){t&&o(t)},getURLParam:c,getOfferId:function(){var t=window.location.pathname;return/^\/offer\/(\d+)\.htm/gi.test(t)?t.replace("/offer/","").replace(".html","").replace(".htm",""):c("offerId")},getCookie:function(t){var e=l();return!0===u.isJSON(e)&&e[t]},hasCookie:function(t){var e=l(),n=!1;return u.isJSON(e)&&"string"==typeof t&&e.hasOwnProperty(t)&&(n=!0),n},getReferer:function(){return document.referrer},goToPage:function(t){window.location.href=t},getLoginUrl:function(t){var e=["ACCOUNT","MESSAGE"];e.indexOf(t)<0&&(t=e[0]);var n=function(t){var e=t;try{!0===/AliApp\(AP.*\)/.test(i)&&(e=e.replace(/\&userid\=[a-zA-Z0-9%]{1,}\&/i,"&"))}catch(t){console.log(t)}return e}(window.location.href),o="https://m.1688.com/pass.html?done="+encodeURIComponent(n);return{ACCOUNT:o,MESSAGE:o+"&_login_="+encodeURIComponent("smsLoginShowFirst=true")}[t]||o},log:function(){var t=arguments;try{if(!0===f){var e=[];e.push("[@alife/more-gray-level]: ");for(var n=0;n<arguments.length;n++)e.push(t[n]);console.log.apply(this,e)}}catch(t){}},infoGoldlogAction:function(t){if(window.goldlog&&window.goldlog.record)window.goldlog.record("/1688detail.detail.page_info","OTHER","info_data="+t,"H1484266068");else if(window.Image&&"function"==typeof window.Image){var e="//gm.mmstat.com/1688detail.detail.page_info?info_data="+t+"&t="+(new Date).getTime();(new window.Image).src=e}},clickGoldlogAction:function(t){if(window.goldlog&&window.goldlog.record)window.goldlog.record("/1688detail.detail.page_click","CLK","click_action="+t,"H1485189564");else if(window.Image&&"function"==typeof window.Image){var e="//gm.mmstat.com/1688detail.detail.page_click?click_action="+t+"&t="+(new Date).getTime();(new window.Image).src=e}}},d=/^https\:\/\//i;var p={parsePluginList:function(t){var e,n=[];if(!0===u.isJSON(t)&&!0===t.P0_Enable&&u.isArray(t.P1_Plugin_List))for(var o=t.P1_Plugin_List,i=0;i<o.length;i++){var r=o[i];!0===u.isJSON(r)&&!0===r.P2_IsEnable&&!0===(e=r.P3_PluginUrl,!0===u.isString(e)&&d.test(e))&&n.push({url:r.P3_PluginUrl,stylecombine:!0===r.P3_IsStyleCombine})}return n}};function m(t){var e=t.jdata;return""+g.getURLParam("_JDATA_DEBUG_")=="true"==!0&&(e=t.jdataDebug),e}function v(){var n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).url;!0===u.isString(n)&&r.ajax({url:n,dataType:"script",cache:!0}).done(function(t,e){"success"===e?console.log("[extend-plugin]: "+n+" load success"):console.log("[extend-plugin]: "+n+" load fail")})}var w=function(){var t=m(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});u.isString(t)?g.getConfig({data:{resourceId:t},success:function(t){!function(t){if(!0===u.isArray(t))for(var e=0;e<t.length;e++)v(t[e])}(p.parsePluginList(t))},fail:function(t){console.log("fail:",t)},error:function(t){console.log("err:",t)}}):console.log("jdata id is not string")};setTimeout(function(){w({jdata:"643824",jdataDebug:"643817"})},234)});
