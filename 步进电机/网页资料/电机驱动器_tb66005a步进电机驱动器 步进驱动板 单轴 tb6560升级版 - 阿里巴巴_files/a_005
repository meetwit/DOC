define("page.ditto.face.ContactInfo",["jQuery","Tracelog"],function(i,n){var e={init:function(){this.div=i("div.fui-sidebar-v2"),this.initTpl(),this._bindEvent(),this._initTip()},_bindEvent:function(){var e,t=i("div.fui-bar-div",this.div),a=i("div.contact-container",t);t.on("mouseenter",function(){e=setTimeout(function(){FE.sys.businessCard_embed?a.fadeIn():i.getScript("//astyle.alicdn.com/sys/js/member/businesscard-embed.js",function(){FE.sys.businessCard_embed.show(),a.fadeIn()}),n.dmtrackClick("offerdetail_click_contactinfo")},200)}).on("mouseleave",function(){clearTimeout(e),a.fadeOut()})},_initTip:function(){var n=i("div.d-tip","li.fui-contact"),e=i("a.close",n),t="showContactTip";i.use("util-storage",function(){var a=i.util.storage;a.ready(function(){a.getItem(t)&&n.hide(),e.click(function(i){i.preventDefault(),a.setItem(t,"true"),n.hide()})})})},initTpl:function(){{var i,n=iDetailConfig.offerid,e=(iDetailConfig.memberid,iDetailConfig.loginId),t=iDetailConfig.alibabaServer;iDetailConfig.domainType,iDetailConfig.sourceType}i='\r\n                <li class="fui-bar-li fui-contact">\r\n                	<div class="d-tip">\u8054\u7cfb\u65b9\u5f0f\u653e\u5230\u8fd9\u5566<i class="icon-arrow icon-arrow-right"><em></em><span></span></i><a class="close">x</a></div>\r\n                    <div class="fui-bar-div">\r\n                        <span class="fui-bg">\u8054\u7cfb\u65b9\u5f0f</span>\r\n                        <i class="link-contact" />\r\n                        <div class="contact-container fd-hide">\r\n                            <div id="businessCard_member"\r\n                                 data-membercard_embed=\'{"member_login_id":"'+e+'","trace":"detail","domain":"'+t+'","offerid":"'+n+"\"}'\r\n                                 data-sourcetype=sourceType \r\n                                 data-domaintype=domainType>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </li>",this.div.find("ul").append(i)}};return e});;define(["jQuery","FaceContext"],function(e,i){var t=/s.1688.com|daixiao.1688.com/,o={init:function(){this.initWPCustom(),this.initTabVisibility(),detail.require("page.common.face.TabGenerator").init(),detail.require("page.common.face.Tip").init(),this.initSelectedEvaluateTab(),detail.require(["page.ditto.face.Recommend"],function(e){"weigong"!=window.iDetailConfig.pageType&&e.init()}),detail.trigger("detailReady")},initShowOfferInfo:function(){var i=document.referrer,o=window.location.href;if(-1===o.indexOf("position=top")&&t.test(i)){var a=e("#mod-detail").offset().top;e(document).scrollTop(a)}},initWPCustom:function(){e(window).bind("checkWPCustom.face",function(i,t){{var o=e("div.main-wrap");o.hasClass("custom-hide")}"mod-detail-description"===t?o.removeClass("custom-hide"):o.addClass("custom-hide"),e(window).trigger("resize")})},initTabVisibility:function(){this.detailInfo=e("div.mod-detail-bd"),this.detailInfoBlocks=e("div.mod-info",this.detailInfo);var i=this;e(window).bind("determineTabVisibility.face",function(t,o){i.detailInfoBlocks.attr("ready-to-show",!1),e("div.header",i.detailInfoBlocks).attr("ready-to-show",!1);for(var a=0;a<i.detailInfoBlocks.length;a++){var d=i.detailInfoBlocks.eq(a).data("modConfig"),n=i.detailInfoBlocks.eq(a),s=e("div.header",n),r=e("div.content",n);if("undefined"!=typeof d&&d.showOn){if(d.showOn.length)for(var l=0;l<d.showOn.length;l++)d.showOn[l]===o&&(n.attr("ready-to-show",!0),i.detailInfoBlocks.eq(a).hasClass(o)?s.attr("ready-to-show",!1):"none"!==r.css("display")&&s.attr("ready-to-show",!0))}else n.attr("ready-to-show",!0),"none"!==r.css("display")&&s.attr("ready-to-show",!0)}e('div.mod-info[ready-to-show="true"]',i.detailInfo).show(),e('div.mod-info[ready-to-show!="true"]',i.detailInfo).hide(),e('div.header[ready-to-show!="true"]',i.detailInfoBlocks).hide(),e('div.header[ready-to-show="true"]',i.detailInfoBlocks).show()})},initSelectedEvaluateTab:function(){var i=window.location.search,t=(i||"").replace(/^\?/,"");t=e.unparam(t),t.selected&&("evaluate"===t.selected?e(window).trigger("openTab","mod-detail-comment"):e(window).trigger("openTab",t.selected))}};i.add("default",o)});;define("sys/favorite/v1/core",["jquery","require","lofty/util/messageproxy/1.0/messageproxy"],function(t,e,s){"use strict";function i(){return{isLogin:function(){var t="undefined"!=typeof FE?FE.util.LoginId():!0;return t},login:function(s){function i(){FE.sys.logist({source:"sys_addfavorite",onLoginSuccess:function(){FE.sys.logist("close"),t.isFunction(s)&&s(),setTimeout(function(){window.location.reload()},2e3)},onRegistSuccess:function(){FE.sys.logist("close"),window.location.reload()}})}"undefined"!=typeof FE&&FE.sys&&FE.sys.logist?i():e.use([p,h],function(){i()})}}}function n(t){var e=t.substring(0,t.indexOf("://")),s=t.substring(t.indexOf("://")+3,t.length),i=s.indexOf("/");return i>0&&(s=s.substring(0,i)),e+"://"+s}function a(){var t=n(window.location.href);return/^(http|https):\/\/[\w-]+-test\.[\s\S]*$/.test(t)}function o(){var t=null;return t="undefined"!=typeof FE&&FE.test&&FE.test["style.purchase.url"]?FE.test["style.purchase.url"]:"undefined"!=typeof lofty&&lofty.test&&lofty.test["style.purchase.url"]?lofty.test["style.purchase.url"]:a()?"https://purchase-test.1688.com":"https://purchase.1688.com"}var c,r,l="/favorites/json/safe/add_to_favorites.json",d="/favorites/work_favorites.htm",u="_addfavorite_action_",f={},g=i(),h="sys/logist/logist-min",p="sys/logist/logist-min.css",y="sys/trace/aliclick-min",v="mod-dialog-addfavorite",b=["sys/favorite/core.css","lofty/ui/dialog/1.0/back/dialog-min.css","lofty/ui/button/1.0/back/button-min.css","fui/dialog/1.0","util/template/1.0"],m={valve:!0,purchaseServer:o(),proxyUrl:o()+"/message_proxy_server",proxyCallbackUrl:n(window.location.href)+"/message_proxy_client",rType:"jsonp",resourceApp:"",isDialogShow:!0,onCallback:t.noop,batchData:null},k={isModal:!0,timers:500,dragAble:!0,dragSelector:".d-header",buttons:[{event:"click",selector:".d-close",callback:function(){this.hide()}}]},_=function(e){this.config=t.extend({},m,e),this.init(this.config)};return _.prototype={init:function(t){var s=this;this.config=t,e.use(s.config.isDialogShow?b:[],function(e,i,n,a,o){c||(c=a),r||(r=o),s._init(t)})},_init:function(t){var e=this;g.isLogin()?(lofty.log("[addFavorite] user is logined"),e.action(e.config.purchaseServer+l,e.config)):(lofty.log("[addFavorite] user is unlogined"),g.login(function(){e.action(e.config.purchaseServer+l,e.config)})),e.tracelog("action")},initEvt:function(){var e=this,s="click.scanClose",i=t("#"+v);i.data("events")&&i.data("events")[s]||i.on(s,"a[data-action=close]",function(t){t.preventDefault(),e.close()})},isSameDomain:function(t){var e=window.location.href,s=e.substring(0,e.indexOf("://")),i=e.substring(e.indexOf("://")+3,e.length),n=i.indexOf("/");return n>0&&(i=i.substring(0,n)),i=s+"://"+i,t===i},action:function(e,i){{var n=this,a=n.getRequestParams(i);i.contentType}this.isSameDomain(n.config.purchaseServer)?t.ajax({url:e,dataType:i.rType,data:a,cache:!1,success:function(t){"function"==typeof n.success&&n.success(t)},error:function(t,e,s){"function"==typeof n.error&&n.error({status:-1,errorCode:e||"clientError",errorMessage:s})}}):s.send({url:e,proxyUrl:n.config.proxyUrl,proxyCallbackUrl:n.config.proxyCallbackUrl,data:a,success:function(t){"function"==typeof n.success&&n.success(t)},error:function(t,e){"function"==typeof n.error&&n.error({status:-1,errorCode:t||"clientError",errorMessage:e})}})},success:function(e){var s=e.result;this.config.isDialogShow&&this.open({status:s.state,type:this.config.contentType,cls:"",memberCnt:s.memberCnt,totalCnt:s.totalCnt}),t.isFunction(this.config.onCallback)&&this.config.onCallback(e,this.config),this.tracelog("success")},error:function(e){t.isFunction(this.config.onCallback)&&this.config.onCallback({status:e.status||-1,type:this.config.contentType},this.config),this.config.isDialogShow&&this.open({status:e.status||-1,type:this.config.contentType,cls:""}),this.tracelog("error")},getRequestParams:function(e){function s(t){var e={};return t?(t.contentType&&(e.content_type=t.contentType),t.contentId&&(e.content_id=t.contentId),t.sellerMemberId&&(e.seller_member_id=t.sellerMemberId),e):e}var i=e.batchData,n={};return i?(n=[],t.each(i,function(t,e){n.push(s(i[t]))}),n):n=s(e)},open:function(e){e.type=f.type[e.type],e.manageUrl=this.config.purchaseServer+d;var s=this,i=f.status[e.status],n=r.compile(i),a=n(e),o=t("#"+v);o=o[0]?o:s.build(),t(".d-title",o).html(e.status+""!="1"?"\u6536\u85cf\u6210\u529f":"\u6536\u85cf\u5931\u8d25"),t(".d-content",o).html(a),this.initEvt(),this.dialog=new c(k),this.dialog.show({selector:"#"+v})},build:function(){var e=t('<div id="'+v+'" class="mod-favorite-dialog">'+f.root+"</div>").appendTo("body").hide();return e},close:function(){this.dialog.hide(),this.tracelog("close")},tracelog:function(t){function s(t,e){aliclick(null,"?tracelog="+e+u+t)}var i=this.config.resourceApp;"undefined"!=typeof aliclick?s(t,i):e.use([y],function(){s(t,i)})}},f.type={COMPANY:"\u4f9b\u5e94\u5546",OFFER_SALE:"\u8d27\u54c1",OFFER_BUY:"\u8d27\u54c1"},f.root=['<div class="fui-dialog-body">','<div class="d-header">','<strong class="d-title"></strong>','<a href="#" target="_self" class="d-close"></a>',"</div>",'<div class="d-detail">','<div class="d-content"></div>',"</div>","</div>"].join(""),f.status={},f.status[-1]=['<div class="d-alert d-alert-error">','<dl class="unit-info">','<dt class="c-header"><i></i>\u7f51\u7edc\u7e41\u5fd9\uff0c\u8bf7\u91cd\u8bd5!</dt>','<dd class="c-desc">','<a href="<%= manageUrl %>" target="_blank" class="fui-btn-important">\u7ba1\u7406\u6536\u85cf\u5939</a>','<a href="#" class="close-btn link" data-action="close" title="\u7ee7\u7eed\u6d4f\u89c8" target="_blank">\u7ee7\u7eed\u6d4f\u89c8</a>',"</dd>","</dl>","</div>"].join(""),f.status[0]=['<div class="d-alert d-alert-success">','<dl class="unit-info">','<dt class="c-header"><i></i>\u6536\u85cf\u6210\u529f\uff0c\u6b64\u4fe1\u606f\u6536\u85cf\u4eba\u6c14\uff1a<strong class="org"><%= memberCnt %></strong>\u6b21</dt>','<dd class="c-subheader">\u6536\u85cf\u5939\u4e2d\u5df2\u7ecf\u6536\u85cf<em class="org"><%= totalCnt %></em>\u79cd<%= type %></dd>','<dd class="c-desc">','<a href="<%= manageUrl %>" target="_blank" class="fui-btn-important">\u7ba1\u7406\u6536\u85cf\u5939</a>','<a href="#" class="close-btn link" data-action="close" title="\u7ee7\u7eed\u6d4f\u89c8" target="_blank">\u7ee7\u7eed\u6d4f\u89c8</a>',"</dd>","</dl>","</div>"].join(""),f.status[1]=['<div class="d-alert d-alert-error">','<dl class="unit-info">','<dt class="c-header"><i></i>\u8be5<%= type %>\u4e0d\u5b58\u5728\u6216\u7cfb\u7edf\u5f02\u5e38!</dt>','<dd class="c-desc">','<a href="<%= manageUrl %>" target="_blank" class="fui-btn-important">\u7ba1\u7406\u6536\u85cf\u5939</a>','<a href="#" class="close-btn link" data-action="close" title="\u7ee7\u7eed\u6d4f\u89c8" target="_blank">\u7ee7\u7eed\u6d4f\u89c8</a>',"</dd>","</dl>","</div>"].join(""),f.status[2]=['<div class="d-alert d-alert-info">','<dl class="unit-info">','<dt class="c-header"><i></i>\u60a8\u5df2\u7ecf\u6536\u85cf\u8fc7\u8be5<%= type %></dt>','<dd class="c-subheader">\u6536\u85cf\u5939\u4e2d\u5df2\u6536\u85cf<em class="org"><%= totalCnt %></em>\u79cd\u8d27\u54c1</dd>','<dd class="c-desc">','<a href="<%= manageUrl %>" target="_blank" class="fui-btn-important">\u7ba1\u7406\u6536\u85cf\u5939</a>','<a href="#" class="close-btn link" data-action="close" title="\u7ee7\u7eed\u6d4f\u89c8" target="_blank">\u7ee7\u7eed\u6d4f\u89c8</a>',"</dd>","</dl>","</div>"].join(""),f.status[3]=['<div class="d-alert d-alert-info">','<dl class="unit-info">','<dt class="c-header"><i></i>\u60a8\u7684\u6536\u85cf\u5939\u5df2\u6ee1\uff0c\u8bf7\u5220\u9664\u540e\u518d\u6536\u85cf<%= type %></dt>','<dd class="c-desc">\u6536\u85cf\u5939\u4e2d\u5df2\u7ecf\u6536\u85cf<em class="org"><%= totalCnt %></em></em>\u79cd<%= type %></dd>','<dd class="c-desc">','<a href="<%= manageUrl %>" target="_blank" class="fui-btn-important">\u7ba1\u7406\u6536\u85cf\u5939</a>','<a href="#" class="close-btn link" data-action="close" title="\u7ee7\u7eed\u6d4f\u89c8" target="_blank">\u7ee7\u7eed\u6d4f\u89c8</a>',"</dd>","</dl>","</div>"].join(""),{create:function(t){new _(t)}}}),define(["jquery","sys/favorite/v1/core"],function(t,e){t(function(){t(document).on("click.addfavorite","a[data-sys-favorite]",function(s){s.preventDefault();var i=t(this).data("sysFavorite");i&&i.valve!==!1&&e.create(i)})})});;define(["jQuery","ModContext"],function(o,t){var i={init:function(){if(this.div=o("div.mod-detail-footer"),this.lock=!1,this.div.length){this.lazyContainer=o("div.lazyload-textarea",this.div);var t=this,i=50;o(window).bind("loadFooter resize.footer scroll.footer",function(){if(!t.lock){var e=o(document).scrollTop()+o(window).height()+i;t.div.length>0&&o(t.div).offset().top<e&&(t.lazyContainer.html(o(".lazyload-context",t.lazyContainer).html()),t.lock=!0)}}),o(window).trigger("loadFooter")}}};t.add("mod-detail-footer","area-detail-footer",i)});;