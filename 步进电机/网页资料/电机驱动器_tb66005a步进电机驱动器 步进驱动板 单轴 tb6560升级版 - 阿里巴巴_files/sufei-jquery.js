/* 2017-03-14 21:19:32 */
!function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){function r(e){return this instanceof r||!l(e)?void 0:s(e)}function i(e){var t,n;for(t in e)n=e[t],r.Mutators.hasOwnProperty(t)?r.Mutators[t].call(this,n):this.prototype[t]=n}function s(e){return e.extend=r.extend,e.implement=i,e}function o(){}function a(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){if(n&&-1===d(n,r))continue;"prototype"!==r&&(e[r]=t[r])}}t.exports=r,r.create=function(e,t){function n(){e.apply(this,arguments),this.constructor===n&&this.initialize&&this.initialize.apply(this,arguments)}return l(e)||(t=e,e=null),t||(t={}),e||(e=t.Extends||r),t.Extends=e,e!==r&&a(n,e,e.StaticsWhiteList),i.call(n,t),s(n)},r.extend=function(e){return e||(e={}),e.Extends=this,r.create(e)},r.Mutators={Extends:function(e){var t=this.prototype,n=u(e.prototype);a(n,t),n.constructor=this,this.prototype=n,this.superclass=e.prototype},Implements:function(e){f(e)||(e=[e]);for(var t,n=this.prototype;t=e.shift();)a(n,t.prototype||t)},Statics:function(e){a(this,e)}};var u=Object.__proto__?function(e){return{__proto__:e}}:function(e){return o.prototype=e,new o},c=Object.prototype.toString,f=Array.isArray||function(e){return"[object Array]"===c.call(e)},l=function(e){return"[object Function]"===c.call(e)},d=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}},{}],2:[function(e,t,n){t.exports={app:"jquery",style:"app/common/sufei-tb.css"}},{}],3:[function(e,t,n){var r={},i={};r.on=function(e,t){var n=i[e]||(i[e]=[]);return n.push(t),r},r.off=function(e,t){if(!e&&!t)return i={},r;var n=i[e];if(n)if(t)for(var s=n.length-1;s>=0;s--)n[s]===t&&n.splice(s,1);else delete i[e];return r},r.fire=function(e,t){var n=i[e];if(n){n=n.slice();for(var s=0,o=n.length;o>s;s++)n[s](t)}return r},t.exports=r},{}],4:[function(e,t,n){var r=e("./mod/sufei-$"),i=e("./config/sufei-jquery");screen.width<800&&(i.style="app/common/sufei-h5.css");var s="0.1.0";i.version=s,i.style="//g.alicdn.com/sd/sufei/"+s+"/"+i.style,new r(i),window.__sufei_injected__=1},{"./config/sufei-jquery":2,"./mod/sufei-$":7}],5:[function(e,t,n){t.exports=function(){"use strict";var e,t,n,r,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},s=function(t){throw{name:"SyntaxError",message:t,at:e,text:n}},o=function(r){return r&&r!==t&&s("Expected '"+r+"' instead of '"+t+"'"),t=n.charAt(e),e+=1,t},a=function(){var e,n="";for("-"===t&&(n="-",o("-"));t>="0"&&"9">=t;)n+=t,o();if("."===t)for(n+=".";o()&&t>="0"&&"9">=t;)n+=t;if("e"===t||"E"===t)for(n+=t,o(),("-"===t||"+"===t)&&(n+=t,o());t>="0"&&"9">=t;)n+=t,o();return e=+n,isFinite(e)?e:void s("Bad number")},u=function(){var e,n,r,a="";if('"'===t)for(;o();){if('"'===t)return o(),a;if("\\"===t)if(o(),"u"===t){for(r=0,n=0;4>n&&(e=parseInt(o(),16),isFinite(e));n+=1)r=16*r+e;a+=String.fromCharCode(r)}else{if("string"!=typeof i[t])break;a+=i[t]}else a+=t}s("Bad string")},c=function(){for(;t&&" ">=t;)o()},f=function(){switch(t){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null}s("Unexpected '"+t+"'")},l=function(){var e=[];if("["===t){if(o("["),c(),"]"===t)return o("]"),e;for(;t;){if(e.push(r()),c(),"]"===t)return o("]"),e;o(","),c()}}s("Bad array")},d=function(){var e,n={};if("{"===t){if(o("{"),c(),"}"===t)return o("}"),n;for(;t;){if(e=u(),c(),o(":"),Object.hasOwnProperty.call(n,e)&&s('Duplicate key "'+e+'"'),n[e]=r(),c(),"}"===t)return o("}"),n;o(","),c()}}s("Bad object")};return r=function(){switch(c(),t){case"{":return d();case"[":return l();case'"':return u();case"-":return a();default:return t>="0"&&"9">=t?a():f()}},function(i,o){var a;return n=i,e=0,t=" ",a=r(),c(),t&&s("Syntax error"),"function"==typeof o?function u(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=u(i,n),void 0!==r?i[n]=r:delete i[n]);return o.call(e,t,i)}({"":a},""):a}}()},{}],6:[function(e,t,n){function r(e){try{var t,n,r=e.data.split(a);r.length>1?(t=r[0],n=r[1]):(r=i(r[0]),t=r.type,n=r.content);for(var s=0,o=l.length;o>s;s++)l[s].event===t&&l[s].callback(n)}catch(u){}}function i(e){return o?o(e):s(e)}var s=e("./json_parse"),o=window.JSON&&JSON.parse,a="@=_=@",u=null,c=null,f=null,l=[],d={uid:0,hid:-1,q:[],tm:0,postMessage:function(e,t){var n=++d.uid,r=d.q,i={name:+new Date+""+n+"^"+document.domain+"&"+t,uid:n,target:e};r.push(i),d.tm||(d.tm=setInterval(function(){var e=d.q;if(!(0===e.length||e[0].uid<=d.hid)){var t=e[0];d.hid=t.uid,t.target.name=t.name}},10))},ListenerMessage:function(e,t){function n(){if(!e)return!1;var n=e.name;if(n!==r){d.q.shift(),r=n;var s=i.exec(n);if(!s)return;t&&t({origin:s[2],data:s[3]})}}var r="",i=/^(\d+?)\^(.+?)&(.*?)$/;setInterval(n,10)}};window.SufeiMessenger=t.exports={initListener:function(e){u=e.currentWin,c=e.originWin,f=e.msgTransfer,u&&c&&f&&(u.postMessage?u.addEventListener?u.addEventListener("message",r,!1):u.attachEvent&&u.attachEvent("onmessage",r):"fromFrame"==f?d.ListenerMessage(c,r):d.ListenerMessage(u,r))},register:function(e,t){l.push({event:e,callback:t})},send:function(e){var t=e.type+a+e.content;u&&c&&f&&(c.postMessage?c.postMessage(t,"*"):"fromFrame"==f?d.postMessage(c,t):d.postMessage(u,t,"*"))}}},{"./json_parse":5}],7:[function(e,t,n){function r(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}var i,s=e("../emit"),o=e("../sufei-base"),a=window,u=a.jQuery||a.Zepto,c=(r("String"),[].slice),f=o.extend({initialize:function(e){function t(e){var t=e.id||"";return/jquery|zepto/.test(t.toLowerCase())&&e.exports&&e.exports.fn}var n=this;if(s.on("event:cleanHijackQueue@sufei",function(){for(var e,t,r,i=[n.currentRequest].concat(n.queue),s=0;s<i.length;s++)i[s]&&(t=i[s].sufeiData,e=t&&t.defer,r=t&&t.response,e&&e.rejectWith(t.xhr,r))}),f.superclass.initialize.call(n,e),a.seajs){for(var r in seajs.cache)if(t(seajs.cache[r])){u=seajs.cache[r].exports,n.setup();break}u||seajs.on&&seajs.on("exec",function(e){t(e)&&(u=e.exports,n.setup())})}u?n.setup():n.poll()},poll:function(){function e(){u=a.jQuery||a.Zepto,u&&t.setup()}var t=this;i=setInterval(e,50)},setup:function(){var e=this;i&&clearInterval(i);var t=function(t,n){var r=n.success,i=t.defer;t.success=function(s,o,a){var f=e.validate(s);f.pass?(r&&r.apply(t.context||t,arguments),t.sufeiData&&t.sufeiData.defer&&t.sufeiData.defer.resolveWith(a,c.call(arguments))):(s=f.result||s,e.run({url:s.url,config:u.extend({sufeiData:{defer:i,xhr:a,response:c.call(arguments)},url:t.url},n),im:f.immediate}))}};u.ajaxPrefilter?u.ajaxPrefilter(function(n,r,i){if(u.Deferred){var s=u.Deferred();return i.done(function(t){var n=e.validate(t);n.pass?s.resolveWith(i,c.call(arguments)):s.reject()}),i.fail(s.reject),n.defer=s,t(n,r),s.promise()}t(n,r)}):u(document).on("ajaxBeforeSend",function(e,n,r){/json/i.test(r.dataType)&&t(r,u.extend({},r))}),e.setup=function(){}},getValidateURI:function(e){u.ajax({url:e,dataType:"jsonp",sufei:!0,success:function(e){self.status=200,s.fire("event:showDialog@sufei",e.url)}})},resendRequest:function(e){var t=this;if(u){var n=[t.currentRequest];u.each(n.concat(t.queue),function(n,r){r.url=t.addQueryToken(r.url,e),"jsonp"===r.dataType&&(r.url=r.url.replace(/callback=[\d\w_]+/,"sufei_resend=1")),u.ajax(r)}),t.reset()}}});t.exports=f},{"../emit":3,"../sufei-base":8}],8:[function(e,t,n){function r(){var e=u.createElement("b");return e.innerHTML="<!--[if lte IE 7]><i></i><![endif]-->",1===e.getElementsByTagName("i").length}function i(e){return h?h(e):v(e)}function s(e,t){function n(){r.onload=r.onreadystatechange=null,r=null,t()}e||t&&t();var r=u.createElement("link");r.charset="utf-8",r.rel="stylesheet",r.href=e;var i="onload"in r;m&&!i&&setTimeout(function(){o(r,t)},1),i?r.onload=n:r.onreadystatechange=function(){/loaded|complete/.test(r.readyState)&&n()},c.appendChild(r),u.createStyleSheet&&u.createStyleSheet(e)}function o(e,t){var n,r=e.sheet;if(m)r&&(n=!0);else if(r)try{r.cssRules&&(n=!0)}catch(i){"NS_ERROR_DOM_SECURITY_ERR"===i.name&&(n=!0)}setTimeout(function(){n?t():o(e,t)},20)}var a=window,u=document,c=u.head||u.getElementsByTagName("head")[0]||u.documentElement,f=a.navigator.userAgent,l=e("./emit"),d=e("./class"),p=e("./messenger"),v=e("./json_parse"),h=a.JSON&&JSON.parse,g=function(){},m=+f.replace(/.*(?:AppleWebKit|AndroidWebKit)\/?(\d+).*/i,"$1")<536,y=/iphone|ipad|ipod/.test(f.toLowerCase()),x="rgv587_flag",j="sm";t.exports=d.create({initialize:function(e){var t=this;e=e||{},t.app=e.app||"",t.version=e.version||"",t.style=e.style||"",t.dialog=null,t.reset(),t.listen()},reset:function(){var e=this;e.currentRequest=null,e.queue=[],e.status=0},listen:function(){var e=this;l.on("event:cleanHijackQueue@sufei",function(){e.reset()}),l.on("event:showDialog@sufei",function(t){e.dialog?e.show(t):s(e.style,function(){e.render(t),e.show()})}),l.on("msg:validateSuccess@sufei",function(t){e.resendRequest(t),e.hide(),p.send({type:"msg:resetCheckCode@sufei",content:""})})},initMessenger:function(e){var t=this;p.initListener({currentWin:a,originWin:e,msgTransfer:"fromFrame"}),p.register("msg:validateSuccess@sufei",function(e){l.fire("msg:validateSuccess@sufei",e)}),p.register("child",function(e){e=i(decodeURIComponent(e));var n=t.validate(e);n.pass?e.queryToken?l.fire("msg:validateSuccess@sufei",e.queryToken):t.hide():l.fire("event:showDialog@sufei",e.url)})},show:function(e){var t=this;e&&t.frame.src!=e&&(t.frame.src=e),t.dialog&&(t.dialog.style.display="block"),p.send({type:"msg:refreshCheckCode@sufei",content:""}),l.fire("event:dialogShow@sufei")},hide:function(){l.fire("event:cleanHijackQueue@sufei"),this.dialog&&(this.dialog.style.display="none"),l.fire("event:dialogHide@sufei")},render:function(e){var t=this,n=u.createElement("div");n.style.display="none",t.app?n.className="sufei-dialog sufei-dialog-"+t.app:n.className="sufei-dialog",n.innerHTML=['<div class="sufei-dialog-mask">',r()?'<iframe frameborder="none" src="javascript:\'\'"></iframe>':"","</div>",'<div class="sufei-dialog-content">','<iframe id="sufei-dialog-content" frameborder="none" src="'+e+'"></iframe>','<div class="sufei-dialog-close" id="sufei-dialog-close">\u5173\u95ed</div>',"</div>"].join(""),u.body.appendChild(n);var i=u.getElementById("sufei-dialog-close");i.addEventListener?i.addEventListener("click",function(){t.hide()},!1):i.attachEvent("onclick",function(){return t.hide(),!1}),t.dialog=n,t.frame=u.getElementById("sufei-dialog-content"),t.initMessenger(t.frame.contentWindow),y&&t.iosFix(),t.render=function(){}},iosFix:function(){var e=u.body,t="sufei-ios-fix-fixed",n=0,r=this.dialog;e.classList.add(t),l.on("event:dialogShow@sufei",function(){n=e.scrollTop,e.scrollTop=0,r.style.height=Math.max(window.innerHeight,e.scrollHeight)+"px",setTimeout(function(){e.scrollTop=0},200)}),l.on("event:dialogHide@sufei",function(){e.scrollTop=n})},validate:function(e){if("string"==typeof e)try{e=i(e)}catch(t){return{pass:!0}}return!e||e[x]!==j&&e[x+"0"]!==j?{pass:!0}:{result:e,pass:!1,immediate:e[x]===j}},run:function(e){var t=this;return t.status>0&&!e.config.sufei?void t.queue.push(e.config):void(e.im?(t.currentRequest=t.currentRequest||e.config,t.status=200,l.fire("event:showDialog@sufei",e.url)):(t.currentRequest=e.config,t.status=100,t.getValidateURI(e.url)))},setup:g,getValidateURI:g,resendRequest:g,addQueryToken:function(e,t){return e+=/\?/.test(e)?"&"+t:"?"+t},parseJSON:i})},{"./class":1,"./emit":3,"./json_parse":5,"./messenger":6}]},{},[4]);